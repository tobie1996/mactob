{"ast":null,"code":"import React,{useContext,useEffect,useState}from'react';import fetchCategoryWiseProduct from'../helpers/fetchCategoryWiseProduct';import displayINRCurrency from'../helpers/displayCurrency';import{Link}from'react-router-dom';import addToCart from'../helpers/addToCart';import Context from'../context';import scrollTop from'../helpers/scrollTop';import{FaStar,FaRegStar,FaWhatsapp}from'react-icons/fa';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CategoryWiseProductDisplay=_ref=>{let{category,heading}=_ref;const[data,setData]=useState([]);const[loading,setLoading]=useState(true);const[currentPage,setCurrentPage]=useState(1);const itemsPerPage=6;const generateRandomStars=()=>Math.floor(Math.random()*5)+1;const fetchData=async()=>{setLoading(true);const categoryProduct=await fetchCategoryWiseProduct(category);setLoading(false);setData(categoryProduct===null||categoryProduct===void 0?void 0:categoryProduct.data.map(product=>({...product,stars:generateRandomStars()})));};useEffect(()=>{fetchData();},[category]);const totalPages=Math.ceil(data.length/itemsPerPage);const startIndex=(currentPage-1)*itemsPerPage;const selectedProducts=data.slice(startIndex,startIndex+itemsPerPage);const handlePageChange=newPage=>{if(newPage>=1&&newPage<=totalPages){setCurrentPage(newPage);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container relative md:left-28 left-auto mt-10 font-semibold\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold py-4\",children:heading}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 md:grid-cols-[repeat(auto-fit,minmax(300px,320px))] gap-6 md:gap-6 overflow-x-scroll scrollbar-none transition-all\",children:loading?new Array(itemsPerPage).fill(null).map((_,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"w-full min-w-[140px] md:min-w-[320px] max-w-[140px] md:max-w-[320px] bg-white rounded-sm shadow\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-slate-200 h-48 p-4 flex justify-center items-center animate-pulse\"}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 grid gap-1\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"animate-pulse bg-slate-200 p-2 rounded-full\"})})]},index)):selectedProducts.map(product=>{const message=\"Salut, puis-je avoir plus d'informations sur le produit \".concat(product===null||product===void 0?void 0:product.productName,\" co\\xFBtant \").concat(displayINRCurrency(product===null||product===void 0?void 0:product.price),\" ?\");return/*#__PURE__*/_jsxs(\"div\",{className:\"w-full min-w-[140px] md:min-w-[320px] max-w-[140px] md:max-w-[320px] bg-white rounded-sm shadow font-semibold\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/product/\".concat(product===null||product===void 0?void 0:product._id),onClick:scrollTop,children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-slate-200 h-48 p-4 flex justify-start\",children:/*#__PURE__*/_jsx(\"img\",{src:product.productImage[0],className:\"object-scale-down h-full hover:scale-110 transition-all mix-blend-multiply\",alt:product===null||product===void 0?void 0:product.productName})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 flex justify-center items-center flex-col\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"font-medium text-base text-ellipsis line-clamp-1 text-black\",children:product===null||product===void 0?void 0:product.productName}),/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600 font-medium\",children:displayINRCurrency(product===null||product===void 0?void 0:product.sellingPrice)}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-500 line-through\",children:displayINRCurrency(product===null||product===void 0?void 0:product.price)}),/*#__PURE__*/_jsx(\"div\",{className:\"flex\",children:[...Array(5)].map((_,i)=>i<product.stars?/*#__PURE__*/_jsx(FaStar,{className:\"text-yellow-500\"},i):/*#__PURE__*/_jsx(FaRegStar,{className:\"text-gray-400\"},i))})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4\",children:/*#__PURE__*/_jsxs(\"a\",{href:\"https://api.whatsapp.com/send?phone=237696926972&text=\".concat(encodeURIComponent(message)),target:\"_blank\",rel:\"noopener noreferrer\",className:\"flex items-center justify-center text-sm bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded-full transition-all\",children:[/*#__PURE__*/_jsx(FaWhatsapp,{className:\"mr-2\"}),\" Commander\"]})})]},product===null||product===void 0?void 0:product._id);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center mt-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(currentPage-1),disabled:currentPage===1,className:\"px-3 py-1 mx-1 bg-gray-200 rounded disabled:opacity-50\",children:\"Pr\\xE9c\\xE9dent\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"px-3 py-1 mx-1 bg-blue-500 text-white rounded\",children:[currentPage,\" / \",totalPages]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(currentPage+1),disabled:currentPage===totalPages,className:\"px-3 py-1 mx-1 bg-gray-200 rounded disabled:opacity-50\",children:\"Suivant\"})]})]});};export default CategoryWiseProductDisplay;","map":{"version":3,"names":["React","useContext","useEffect","useState","fetchCategoryWiseProduct","displayINRCurrency","Link","addToCart","Context","scrollTop","FaStar","FaRegStar","FaWhatsapp","jsx","_jsx","jsxs","_jsxs","CategoryWiseProductDisplay","_ref","category","heading","data","setData","loading","setLoading","currentPage","setCurrentPage","itemsPerPage","generateRandomStars","Math","floor","random","fetchData","categoryProduct","map","product","stars","totalPages","ceil","length","startIndex","selectedProducts","slice","handlePageChange","newPage","className","children","Array","fill","_","index","message","concat","productName","price","to","_id","onClick","src","productImage","alt","sellingPrice","i","href","encodeURIComponent","target","rel","disabled"],"sources":["C:/Users/Wendy/OneDrive/Desktop/PROJET/MACTOB_STORE/frontend/src/components/CategoryWiseProductDisplay.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\r\nimport fetchCategoryWiseProduct from '../helpers/fetchCategoryWiseProduct';\r\nimport displayINRCurrency from '../helpers/displayCurrency';\r\nimport { Link } from 'react-router-dom';\r\nimport addToCart from '../helpers/addToCart';\r\nimport Context from '../context';\r\nimport scrollTop from '../helpers/scrollTop';\r\nimport { FaStar, FaRegStar, FaWhatsapp } from 'react-icons/fa';\r\n\r\nconst CategoryWiseProductDisplay = ({ category, heading }) => {\r\n    const [data, setData] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const itemsPerPage = 6;\r\n\r\n    const generateRandomStars = () => Math.floor(Math.random() * 5) + 1;\r\n\r\n    const fetchData = async () => {\r\n        setLoading(true);\r\n        const categoryProduct = await fetchCategoryWiseProduct(category);\r\n        setLoading(false);\r\n        setData(categoryProduct?.data.map(product => ({ ...product, stars: generateRandomStars() })));\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, [category]);\r\n\r\n    const totalPages = Math.ceil(data.length / itemsPerPage);\r\n    const startIndex = (currentPage - 1) * itemsPerPage;\r\n    const selectedProducts = data.slice(startIndex, startIndex + itemsPerPage);\r\n\r\n    const handlePageChange = (newPage) => {\r\n        if (newPage >= 1 && newPage <= totalPages) {\r\n            setCurrentPage(newPage);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className='container relative md:left-28 left-auto mt-10 font-semibold'>\r\n            <h2 className='text-2xl font-semibold py-4'>{heading}</h2>\r\n\r\n            <div className='grid grid-cols-2 md:grid-cols-[repeat(auto-fit,minmax(300px,320px))] gap-6 md:gap-6 overflow-x-scroll scrollbar-none transition-all'>\r\n                {loading ? (\r\n                    new Array(itemsPerPage).fill(null).map((_, index) => (\r\n                        <div key={index} className='w-full min-w-[140px] md:min-w-[320px] max-w-[140px] md:max-w-[320px] bg-white rounded-sm shadow'>\r\n                            <div className='bg-slate-200 h-48 p-4 flex justify-center items-center animate-pulse'></div>\r\n                            <div className='p-4 grid gap-1'>\r\n                                <h2 className='animate-pulse bg-slate-200 p-2 rounded-full'></h2>\r\n                            </div>\r\n                        </div>\r\n                    ))\r\n                ) : (\r\n                    selectedProducts.map((product) => {\r\n                        const message = `Salut, puis-je avoir plus d'informations sur le produit ${product?.productName} coûtant ${displayINRCurrency(product?.price)} ?`;\r\n\r\n                        return (\r\n                            <div key={product?._id} className=\"w-full min-w-[140px] md:min-w-[320px] max-w-[140px] md:max-w-[320px] bg-white rounded-sm shadow font-semibold\">\r\n                                <Link to={`/product/${product?._id}`} onClick={scrollTop}>\r\n                                    <div className='bg-slate-200 h-48 p-4 flex justify-start'>\r\n                                        <img src={product.productImage[0]} className='object-scale-down h-full hover:scale-110 transition-all mix-blend-multiply' alt={product?.productName} />\r\n                                    </div>\r\n                                    <div className='p-4 flex justify-center items-center flex-col'>\r\n                                        <h2 className='font-medium text-base text-ellipsis line-clamp-1 text-black'>{product?.productName}</h2>\r\n                                        <p className='text-red-600 font-medium'>{displayINRCurrency(product?.sellingPrice)}</p>\r\n                                        <p className='text-slate-500 line-through'>{displayINRCurrency(product?.price)}</p>\r\n\r\n                                        {/* Affichage des étoiles */}\r\n                                        <div className='flex'>\r\n                                            {[...Array(5)].map((_, i) => (\r\n                                                i < product.stars ? <FaStar key={i} className='text-yellow-500' /> : <FaRegStar key={i} className='text-gray-400' />\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n                                </Link>\r\n\r\n                                {/* Bouton WhatsApp placé en dehors du <Link> */}\r\n                                <div className=\"p-4\">\r\n                                    <a \r\n                                        href={`https://api.whatsapp.com/send?phone=237696926972&text=${encodeURIComponent(message)}`} \r\n                                        target=\"_blank\" \r\n                                        rel=\"noopener noreferrer\" \r\n                                        className=\"flex items-center justify-center text-sm bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded-full transition-all\"\r\n                                    >\r\n                                         <FaWhatsapp className='mr-2' /> Commander\r\n                                    </a>\r\n                                </div>\r\n                            </div>\r\n                        );\r\n                    })\r\n                )}\r\n            </div>\r\n\r\n            {/* Pagination */}\r\n            <div className=\"flex justify-center mt-4\">\r\n                <button\r\n                    onClick={() => handlePageChange(currentPage - 1)}\r\n                    disabled={currentPage === 1}\r\n                    className=\"px-3 py-1 mx-1 bg-gray-200 rounded disabled:opacity-50\"\r\n                >\r\n                    Précédent\r\n                </button>\r\n                <span className=\"px-3 py-1 mx-1 bg-blue-500 text-white rounded\">\r\n                    {currentPage} / {totalPages}\r\n                </span>\r\n                <button\r\n                    onClick={() => handlePageChange(currentPage + 1)}\r\n                    disabled={currentPage === totalPages}\r\n                    className=\"px-3 py-1 mx-1 bg-gray-200 rounded disabled:opacity-50\"\r\n                >\r\n                    Suivant\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CategoryWiseProductDisplay;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC9D,MAAO,CAAAC,wBAAwB,KAAM,qCAAqC,CAC1E,MAAO,CAAAC,kBAAkB,KAAM,4BAA4B,CAC3D,OAASC,IAAI,KAAQ,kBAAkB,CACvC,MAAO,CAAAC,SAAS,KAAM,sBAAsB,CAC5C,MAAO,CAAAC,OAAO,KAAM,YAAY,CAChC,MAAO,CAAAC,SAAS,KAAM,sBAAsB,CAC5C,OAASC,MAAM,CAAEC,SAAS,CAAEC,UAAU,KAAQ,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/D,KAAM,CAAAC,0BAA0B,CAAGC,IAAA,EAA2B,IAA1B,CAAEC,QAAQ,CAAEC,OAAQ,CAAC,CAAAF,IAAA,CACrD,KAAM,CAACG,IAAI,CAAEC,OAAO,CAAC,CAAGnB,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAACoB,OAAO,CAAEC,UAAU,CAAC,CAAGrB,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACsB,WAAW,CAAEC,cAAc,CAAC,CAAGvB,QAAQ,CAAC,CAAC,CAAC,CACjD,KAAM,CAAAwB,YAAY,CAAG,CAAC,CAEtB,KAAM,CAAAC,mBAAmB,CAAGA,CAAA,GAAMC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,CAAG,CAAC,CAAC,CAAG,CAAC,CAEnE,KAAM,CAAAC,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC1BR,UAAU,CAAC,IAAI,CAAC,CAChB,KAAM,CAAAS,eAAe,CAAG,KAAM,CAAA7B,wBAAwB,CAACe,QAAQ,CAAC,CAChEK,UAAU,CAAC,KAAK,CAAC,CACjBF,OAAO,CAACW,eAAe,SAAfA,eAAe,iBAAfA,eAAe,CAAEZ,IAAI,CAACa,GAAG,CAACC,OAAO,GAAK,CAAE,GAAGA,OAAO,CAAEC,KAAK,CAAER,mBAAmB,CAAC,CAAE,CAAC,CAAC,CAAC,CAAC,CACjG,CAAC,CAED1B,SAAS,CAAC,IAAM,CACZ8B,SAAS,CAAC,CAAC,CACf,CAAC,CAAE,CAACb,QAAQ,CAAC,CAAC,CAEd,KAAM,CAAAkB,UAAU,CAAGR,IAAI,CAACS,IAAI,CAACjB,IAAI,CAACkB,MAAM,CAAGZ,YAAY,CAAC,CACxD,KAAM,CAAAa,UAAU,CAAG,CAACf,WAAW,CAAG,CAAC,EAAIE,YAAY,CACnD,KAAM,CAAAc,gBAAgB,CAAGpB,IAAI,CAACqB,KAAK,CAACF,UAAU,CAAEA,UAAU,CAAGb,YAAY,CAAC,CAE1E,KAAM,CAAAgB,gBAAgB,CAAIC,OAAO,EAAK,CAClC,GAAIA,OAAO,EAAI,CAAC,EAAIA,OAAO,EAAIP,UAAU,CAAE,CACvCX,cAAc,CAACkB,OAAO,CAAC,CAC3B,CACJ,CAAC,CAED,mBACI5B,KAAA,QAAK6B,SAAS,CAAC,6DAA6D,CAAAC,QAAA,eACxEhC,IAAA,OAAI+B,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAE1B,OAAO,CAAK,CAAC,cAE1DN,IAAA,QAAK+B,SAAS,CAAC,qIAAqI,CAAAC,QAAA,CAC/IvB,OAAO,CACJ,GAAI,CAAAwB,KAAK,CAACpB,YAAY,CAAC,CAACqB,IAAI,CAAC,IAAI,CAAC,CAACd,GAAG,CAAC,CAACe,CAAC,CAAEC,KAAK,gBAC5ClC,KAAA,QAAiB6B,SAAS,CAAC,iGAAiG,CAAAC,QAAA,eACxHhC,IAAA,QAAK+B,SAAS,CAAC,sEAAsE,CAAM,CAAC,cAC5F/B,IAAA,QAAK+B,SAAS,CAAC,gBAAgB,CAAAC,QAAA,cAC3BhC,IAAA,OAAI+B,SAAS,CAAC,6CAA6C,CAAK,CAAC,CAChE,CAAC,GAJAK,KAKL,CACR,CAAC,CAEFT,gBAAgB,CAACP,GAAG,CAAEC,OAAO,EAAK,CAC9B,KAAM,CAAAgB,OAAO,4DAAAC,MAAA,CAA8DjB,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEkB,WAAW,iBAAAD,MAAA,CAAY/C,kBAAkB,CAAC8B,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEmB,KAAK,CAAC,MAAI,CAEjJ,mBACItC,KAAA,QAAwB6B,SAAS,CAAC,+GAA+G,CAAAC,QAAA,eAC7I9B,KAAA,CAACV,IAAI,EAACiD,EAAE,aAAAH,MAAA,CAAcjB,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEqB,GAAG,CAAG,CAACC,OAAO,CAAEhD,SAAU,CAAAqC,QAAA,eACrDhC,IAAA,QAAK+B,SAAS,CAAC,0CAA0C,CAAAC,QAAA,cACrDhC,IAAA,QAAK4C,GAAG,CAAEvB,OAAO,CAACwB,YAAY,CAAC,CAAC,CAAE,CAACd,SAAS,CAAC,4EAA4E,CAACe,GAAG,CAAEzB,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEkB,WAAY,CAAE,CAAC,CACtJ,CAAC,cACNrC,KAAA,QAAK6B,SAAS,CAAC,+CAA+C,CAAAC,QAAA,eAC1DhC,IAAA,OAAI+B,SAAS,CAAC,6DAA6D,CAAAC,QAAA,CAAEX,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEkB,WAAW,CAAK,CAAC,cACvGvC,IAAA,MAAG+B,SAAS,CAAC,0BAA0B,CAAAC,QAAA,CAAEzC,kBAAkB,CAAC8B,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAE0B,YAAY,CAAC,CAAI,CAAC,cACvF/C,IAAA,MAAG+B,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAEzC,kBAAkB,CAAC8B,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEmB,KAAK,CAAC,CAAI,CAAC,cAGnFxC,IAAA,QAAK+B,SAAS,CAAC,MAAM,CAAAC,QAAA,CAChB,CAAC,GAAGC,KAAK,CAAC,CAAC,CAAC,CAAC,CAACb,GAAG,CAAC,CAACe,CAAC,CAAEa,CAAC,GACpBA,CAAC,CAAG3B,OAAO,CAACC,KAAK,cAAGtB,IAAA,CAACJ,MAAM,EAASmC,SAAS,CAAC,iBAAiB,EAA9BiB,CAAgC,CAAC,cAAGhD,IAAA,CAACH,SAAS,EAASkC,SAAS,CAAC,eAAe,EAA5BiB,CAA8B,CACtH,CAAC,CACD,CAAC,EACL,CAAC,EACJ,CAAC,cAGPhD,IAAA,QAAK+B,SAAS,CAAC,KAAK,CAAAC,QAAA,cAChB9B,KAAA,MACI+C,IAAI,0DAAAX,MAAA,CAA2DY,kBAAkB,CAACb,OAAO,CAAC,CAAG,CAC7Fc,MAAM,CAAC,QAAQ,CACfC,GAAG,CAAC,qBAAqB,CACzBrB,SAAS,CAAC,2HAA2H,CAAAC,QAAA,eAEpIhC,IAAA,CAACF,UAAU,EAACiC,SAAS,CAAC,MAAM,CAAE,CAAC,aACpC,EAAG,CAAC,CACH,CAAC,GA7BAV,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEqB,GA8Bd,CAAC,CAEd,CAAC,CACJ,CACA,CAAC,cAGNxC,KAAA,QAAK6B,SAAS,CAAC,0BAA0B,CAAAC,QAAA,eACrChC,IAAA,WACI2C,OAAO,CAAEA,CAAA,GAAMd,gBAAgB,CAAClB,WAAW,CAAG,CAAC,CAAE,CACjD0C,QAAQ,CAAE1C,WAAW,GAAK,CAAE,CAC5BoB,SAAS,CAAC,wDAAwD,CAAAC,QAAA,CACrE,iBAED,CAAQ,CAAC,cACT9B,KAAA,SAAM6B,SAAS,CAAC,+CAA+C,CAAAC,QAAA,EAC1DrB,WAAW,CAAC,KAAG,CAACY,UAAU,EACzB,CAAC,cACPvB,IAAA,WACI2C,OAAO,CAAEA,CAAA,GAAMd,gBAAgB,CAAClB,WAAW,CAAG,CAAC,CAAE,CACjD0C,QAAQ,CAAE1C,WAAW,GAAKY,UAAW,CACrCQ,SAAS,CAAC,wDAAwD,CAAAC,QAAA,CACrE,SAED,CAAQ,CAAC,EACR,CAAC,EACL,CAAC,CAEd,CAAC,CAED,cAAe,CAAA7B,0BAA0B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}