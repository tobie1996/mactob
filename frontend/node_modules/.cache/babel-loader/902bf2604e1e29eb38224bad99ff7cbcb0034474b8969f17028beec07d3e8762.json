{"ast":null,"code":"import React,{useState}from'react';import ROLE from'../common/role';import{IoMdClose}from\"react-icons/io\";import SummaryApi from'../common';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChangeUserRole=_ref=>{let{name,email,role,userId,onClose,callFunc}=_ref;const[userRole,setUserRole]=useState(role);const handleOnChangeSelect=e=>{setUserRole(e.target.value);console.log(e.target.value);};const updateUserRole=async()=>{const token=localStorage.getItem(\"token\");const fetchResponse=await fetch(SummaryApi.updateUser.url,{method:SummaryApi.updateUser.method,credentials:'include',headers:{\"Content-Type\":'application/json',Authorization:\"Bearer \".concat(token)},body:JSON.stringify({userId:userId,role:userRole})});const responseData=await fetchResponse.json();if(responseData.success){toast.success(responseData.message);onClose();callFunc();}console.log(\"role updated\",responseData);};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed top-0 bottom-0 left-0 right-0 w-full h-full z-10 flex justify-between items-center bg-slate-200 bg-opacity-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mx-auto bg-white shadow-md p-4 w-full max-w-sm\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"block ml-auto\",onClick:onClose,children:/*#__PURE__*/_jsx(IoMdClose,{})}),/*#__PURE__*/_jsx(\"h1\",{className:\"pb-4 text-lg font-medium\",children:\"Changer le role de l'utilisateur\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Nom : \",name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Email : \",email]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between my-4\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Role :\"}),/*#__PURE__*/_jsx(\"select\",{className:\"border px-4 py-1\",value:userRole,onChange:handleOnChangeSelect,children:Object.values(ROLE).map(el=>{return/*#__PURE__*/_jsx(\"option\",{value:el,children:el},el);})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"w-fit mx-auto block  py-1 px-3 rounded-full bg-blue-600 text-white hover:bg-red-700\",onClick:updateUserRole,children:\"Changer\"})]})});};export default ChangeUserRole;","map":{"version":3,"names":["React","useState","ROLE","IoMdClose","SummaryApi","toast","jsx","_jsx","jsxs","_jsxs","ChangeUserRole","_ref","name","email","role","userId","onClose","callFunc","userRole","setUserRole","handleOnChangeSelect","e","target","value","console","log","updateUserRole","token","localStorage","getItem","fetchResponse","fetch","updateUser","url","method","credentials","headers","Authorization","concat","body","JSON","stringify","responseData","json","success","message","className","children","onClick","onChange","Object","values","map","el"],"sources":["C:/Users/Wendy/OneDrive/Desktop/PROJET/MACTOB_STORE/frontend/src/components/ChangeUserRole.js"],"sourcesContent":["import React, { useState } from 'react'\r\nimport ROLE from '../common/role'\r\nimport { IoMdClose } from \"react-icons/io\";\r\nimport SummaryApi from '../common';\r\nimport { toast } from 'react-toastify';\r\n\r\nconst ChangeUserRole = ({\r\n    name,\r\n    email,\r\n    role,\r\n    userId,\r\n    onClose,\r\n    callFunc,\r\n}) => {\r\n    const [userRole, setUserRole] = useState(role)\r\n\r\n    const handleOnChangeSelect = (e) => {\r\n        setUserRole(e.target.value)\r\n\r\n        console.log(e.target.value)\r\n    }\r\n\r\n    const updateUserRole = async () => {\r\n        const token = localStorage.getItem(\"token\");\r\n        const fetchResponse = await fetch(SummaryApi.updateUser.url, {\r\n            method: SummaryApi.updateUser.method,\r\n            credentials: 'include',\r\n            headers: {\r\n                \"Content-Type\": 'application/json',\r\n                Authorization: `Bearer ${token}`\r\n            },\r\n            body: JSON.stringify({\r\n                userId: userId,\r\n                role: userRole\r\n            })\r\n        })\r\n\r\n        const responseData = await fetchResponse.json()\r\n\r\n        if (responseData.success) {\r\n            toast.success(responseData.message)\r\n            onClose()\r\n            callFunc()\r\n        }\r\n\r\n        console.log(\"role updated\", responseData)\r\n\r\n    }\r\n\r\n\r\n    return (\r\n        <div className='fixed top-0 bottom-0 left-0 right-0 w-full h-full z-10 flex justify-between items-center bg-slate-200 bg-opacity-50'>\r\n            <div className='mx-auto bg-white shadow-md p-4 w-full max-w-sm'>\r\n\r\n                <button className='block ml-auto' onClick={onClose}>\r\n                    <IoMdClose />\r\n                </button>\r\n\r\n                <h1 className='pb-4 text-lg font-medium'>Changer le role de l'utilisateur</h1>\r\n\r\n                <p>Nom : {name}</p>\r\n                <p>Email : {email}</p>\r\n\r\n                <div className='flex items-center justify-between my-4'>\r\n                    <p>Role :</p>\r\n                    <select className='border px-4 py-1' value={userRole} onChange={handleOnChangeSelect}>\r\n                        {\r\n                            Object.values(ROLE).map(el => {\r\n                                return (\r\n                                    <option value={el} key={el}>{el}</option>\r\n                                )\r\n                            })\r\n                        }\r\n                    </select>\r\n                </div>\r\n\r\n\r\n                <button className='w-fit mx-auto block  py-1 px-3 rounded-full bg-blue-600 text-white hover:bg-red-700' onClick={updateUserRole}>Changer</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ChangeUserRole"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}