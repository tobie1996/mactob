{"ast":null,"code":"import SummaryApi from\"../common\";import{toast}from'react-toastify';const addToCart=async(e,id)=>{e===null||e===void 0?void 0:e.stopPropagation();e===null||e===void 0?void 0:e.preventDefault();const token=localStorage.getItem(\"token\");if(!token){toast.error(\"Connectez-vous svp!\");console.error(\"Token absent. Veuillez vous connecter.\");return null;}const requestOptions={method:SummaryApi.addToCartProduct.method,credentials:'include',headers:{\"Content-Type\":'application/json',Authorization:\"Bearer \".concat(token)},body:JSON.stringify({productId:id})};try{const response=await fetch(SummaryApi.addToCartProduct.url,requestOptions);const responseData=await response.json();if(responseData.success){// Affiche le message de succès et attend la fin du toast\ntoast.success(responseData.message,{onClose:()=>{// Action à effectuer après le toast de succès\nconsole.log(\"Produit ajouté au panier avec succès\");}});}else{toast.error(responseData.message);}return responseData;}catch(error){console.error(\"Erreur lors de l'ajout au panier :\",error);return null;}};export default addToCart;","map":{"version":3,"names":["SummaryApi","toast","addToCart","e","id","stopPropagation","preventDefault","token","localStorage","getItem","error","console","requestOptions","method","addToCartProduct","credentials","headers","Authorization","concat","body","JSON","stringify","productId","response","fetch","url","responseData","json","success","message","onClose","log"],"sources":["C:/Users/Wendy/OneDrive/Desktop/PROJET/MACTOB_STORE/frontend/src/helpers/addToCart.js"],"sourcesContent":["import SummaryApi from \"../common\";\r\nimport { toast } from 'react-toastify';\r\n\r\nconst addToCart = async (e, id) => {\r\n    e?.stopPropagation();\r\n    e?.preventDefault();\r\n\r\n    const token = localStorage.getItem(\"token\");\r\n\r\n    if (!token) {\r\n        toast.error(\"Connectez-vous svp!\");\r\n        console.error(\"Token absent. Veuillez vous connecter.\");\r\n        return null;\r\n    }\r\n\r\n    const requestOptions = {\r\n        method: SummaryApi.addToCartProduct.method,\r\n        credentials: 'include',\r\n        headers: {\r\n            \"Content-Type\": 'application/json',\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({ productId: id })\r\n    };\r\n\r\n    try {\r\n        const response = await fetch(SummaryApi.addToCartProduct.url, requestOptions);\r\n        const responseData = await response.json();\r\n\r\n        if (responseData.success) {\r\n            // Affiche le message de succès et attend la fin du toast\r\n            toast.success(responseData.message, {\r\n                onClose: () => {\r\n                    // Action à effectuer après le toast de succès\r\n                    console.log(\"Produit ajouté au panier avec succès\");\r\n                }\r\n            });\r\n        } else {\r\n            toast.error(responseData.message);\r\n        }\r\n\r\n        return responseData;\r\n    } catch (error) {\r\n        console.error(\"Erreur lors de l'ajout au panier :\", error);\r\n        return null;\r\n    }\r\n};\r\n\r\nexport default addToCart;\r\n"],"mappings":"AAAA,MAAO,CAAAA,UAAU,KAAM,WAAW,CAClC,OAASC,KAAK,KAAQ,gBAAgB,CAEtC,KAAM,CAAAC,SAAS,CAAG,KAAAA,CAAOC,CAAC,CAAEC,EAAE,GAAK,CAC/BD,CAAC,SAADA,CAAC,iBAADA,CAAC,CAAEE,eAAe,CAAC,CAAC,CACpBF,CAAC,SAADA,CAAC,iBAADA,CAAC,CAAEG,cAAc,CAAC,CAAC,CAEnB,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAE3C,GAAI,CAACF,KAAK,CAAE,CACRN,KAAK,CAACS,KAAK,CAAC,qBAAqB,CAAC,CAClCC,OAAO,CAACD,KAAK,CAAC,wCAAwC,CAAC,CACvD,MAAO,KAAI,CACf,CAEA,KAAM,CAAAE,cAAc,CAAG,CACnBC,MAAM,CAAEb,UAAU,CAACc,gBAAgB,CAACD,MAAM,CAC1CE,WAAW,CAAE,SAAS,CACtBC,OAAO,CAAE,CACL,cAAc,CAAE,kBAAkB,CAClCC,aAAa,WAAAC,MAAA,CAAYX,KAAK,CAClC,CAAC,CACDY,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEC,SAAS,CAAElB,EAAG,CAAC,CAC1C,CAAC,CAED,GAAI,CACA,KAAM,CAAAmB,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAACxB,UAAU,CAACc,gBAAgB,CAACW,GAAG,CAAEb,cAAc,CAAC,CAC7E,KAAM,CAAAc,YAAY,CAAG,KAAM,CAAAH,QAAQ,CAACI,IAAI,CAAC,CAAC,CAE1C,GAAID,YAAY,CAACE,OAAO,CAAE,CACtB;AACA3B,KAAK,CAAC2B,OAAO,CAACF,YAAY,CAACG,OAAO,CAAE,CAChCC,OAAO,CAAEA,CAAA,GAAM,CACX;AACAnB,OAAO,CAACoB,GAAG,CAAC,sCAAsC,CAAC,CACvD,CACJ,CAAC,CAAC,CACN,CAAC,IAAM,CACH9B,KAAK,CAACS,KAAK,CAACgB,YAAY,CAACG,OAAO,CAAC,CACrC,CAEA,MAAO,CAAAH,YAAY,CACvB,CAAE,MAAOhB,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,oCAAoC,CAAEA,KAAK,CAAC,CAC1D,MAAO,KAAI,CACf,CACJ,CAAC,CAED,cAAe,CAAAR,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}