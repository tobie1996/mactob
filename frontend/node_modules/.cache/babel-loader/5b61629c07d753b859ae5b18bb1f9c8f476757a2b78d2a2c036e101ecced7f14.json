{"ast":null,"code":"import'./App.css';import{Outlet}from'react-router-dom';import Header from'./components/Header';import Footer from'./components/Footer';import{ToastContainer}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{useEffect,useState}from'react';import SummaryApi from'./common';import Context from'./context';import{useDispatch}from'react-redux';import{setUserDetails}from'./store/userSlice';import TawkToChat from'./TawkToChat';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function App(){const dispatch=useDispatch();const[cartProductCount,setCartProductCount]=useState(0);const fetchUserDetails=async()=>{const token=localStorage.getItem(\"token\");const headers={Authorization:\"Bearer \".concat(token)};const dataResponse=await fetch(SummaryApi.current_user.url,{method:SummaryApi.current_user.method,credentials:'include',headers});const dataApi=await dataResponse.json();if(dataApi.success){dispatch(setUserDetails(dataApi.data));}};const fetchUserAddToCart=async()=>{var _dataApi$data;const token=localStorage.getItem(\"token\");const headers={Authorization:\"Bearer \".concat(token)};const dataResponse=await fetch(SummaryApi.addToCartProductCount.url,{method:SummaryApi.addToCartProductCount.method,credentials:'include',headers});const dataApi=await dataResponse.json();setCartProductCount(dataApi===null||dataApi===void 0?void 0:(_dataApi$data=dataApi.data)===null||_dataApi$data===void 0?void 0:_dataApi$data.count);};useEffect(()=>{/**user Details */fetchUserDetails();/**user Details cart product */fetchUserAddToCart();},[]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Context.Provider,{value:{fetchUserDetails,// user detail fetch \ncartProductCount,// current user Add to Cart  product count,\nfetchUserAddToCart},children:[/*#__PURE__*/_jsx(ToastContainer,{position:\"top-center\",toastClassName:\"custom-toast\",bodyClassName:\"custom-toast-body\",className:\"custom-toast-container\",autoClose:300/* Délai de fermeture automatique */}),/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"main\",{className:\"pt-16\",children:/*#__PURE__*/_jsx(Outlet,{})}),/*#__PURE__*/_jsx(Footer,{})]})});}export default App;","map":{"version":3,"names":["Outlet","Header","Footer","ToastContainer","useEffect","useState","SummaryApi","Context","useDispatch","setUserDetails","TawkToChat","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","dispatch","cartProductCount","setCartProductCount","fetchUserDetails","token","localStorage","getItem","headers","Authorization","concat","dataResponse","fetch","current_user","url","method","credentials","dataApi","json","success","data","fetchUserAddToCart","_dataApi$data","addToCartProductCount","count","children","Provider","value","position","toastClassName","bodyClassName","className","autoClose"],"sources":["C:/Users/Wendy/OneDrive/Desktop/PROJET/MACTOB_STORE/frontend/src/App.js"],"sourcesContent":["import './App.css';\r\nimport { Outlet } from 'react-router-dom';\r\nimport Header from './components/Header';\r\nimport Footer from './components/Footer';\r\nimport { ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { useEffect, useState } from 'react';\r\nimport SummaryApi from './common';\r\nimport Context from './context';\r\nimport { useDispatch } from 'react-redux';\r\nimport { setUserDetails } from './store/userSlice';\r\nimport TawkToChat from './TawkToChat';\r\n\r\nfunction App() {\r\n  const dispatch = useDispatch()\r\n  const [cartProductCount, setCartProductCount] = useState(0)\r\n\r\n  const fetchUserDetails = async () => {\r\n    const token = localStorage.getItem(\"token\");\r\n    const headers = {\r\n      Authorization: `Bearer ${token}`\r\n    };\r\n    const dataResponse = await fetch(SummaryApi.current_user.url, {\r\n      method: SummaryApi.current_user.method,\r\n      credentials: 'include',\r\n      headers\r\n    })\r\n\r\n    const dataApi = await dataResponse.json()\r\n\r\n    if (dataApi.success) {\r\n      dispatch(setUserDetails(dataApi.data))\r\n    }\r\n  }\r\n\r\n  const fetchUserAddToCart = async () => {\r\n    const token = localStorage.getItem(\"token\");\r\n    const headers = {\r\n      Authorization: `Bearer ${token}`\r\n    };\r\n    const dataResponse = await fetch(SummaryApi.addToCartProductCount.url, {\r\n      method: SummaryApi.addToCartProductCount.method,\r\n      credentials: 'include',\r\n      headers\r\n    })\r\n\r\n    const dataApi = await dataResponse.json()\r\n\r\n    setCartProductCount(dataApi?.data?.count)\r\n  }\r\n  useEffect(() => {\r\n\r\n    /**user Details */\r\n    fetchUserDetails()\r\n    /**user Details cart product */\r\n    fetchUserAddToCart()\r\n\r\n  }, [])\r\n  return (\r\n    <>\r\n      <Context.Provider value={{\r\n        fetchUserDetails, // user detail fetch \r\n        cartProductCount, // current user Add to Cart  product count,\r\n        fetchUserAddToCart\r\n      }}>\r\n        <ToastContainer\r\n          position=\"top-center\"\r\n          toastClassName=\"custom-toast\"\r\n          bodyClassName=\"custom-toast-body\"\r\n          className=\"custom-toast-container\"\r\n          autoClose={300} /* Délai de fermeture automatique */\r\n        />\r\n\r\n        <Header />\r\n        <main className='pt-16'>\r\n          <Outlet />\r\n          {/* <TawkToChat /> */}\r\n        </main>\r\n        <Footer />\r\n      </Context.Provider>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}