{"ast":null,"code":"import React,{useContext,useEffect,useRef,useState}from'react';import fetchCategoryWiseProduct from'../helpers/fetchCategoryWiseProduct';import displayINRCurrency from'../helpers/displayCurrency';import{FaAngleLeft,FaAngleRight}from'react-icons/fa6';import{Link}from'react-router-dom';import addToCart from'../helpers/addToCart';import Context from'../context';import scrollTop from'../helpers/scrollTop';import{FaWhatsapp}from'react-icons/fa';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const HorizontalCardProduct=_ref=>{let{category,heading}=_ref;const[data,setData]=useState([]);const[loading,setLoading]=useState(true);const loadingList=new Array(13).fill(null);const scrollElement=useRef();const{fetchUserAddToCart}=useContext(Context);const handleAddToCart=async(e,id)=>{await addToCart(e,id);fetchUserAddToCart();};const fetchData=async()=>{setLoading(true);const categoryProduct=await fetchCategoryWiseProduct(category);setLoading(false);if(categoryProduct!==null&&categoryProduct!==void 0&&categoryProduct.data){const updatedData=categoryProduct.data.map(product=>({...product,rating:Math.floor(Math.random()*5)+1// Attribution aléatoire des étoiles (1 à 5)\n}));setData(updatedData);}else{setData([]);}};useEffect(()=>{fetchData();},[category]);const scrollRight=()=>{scrollElement.current.scrollLeft+=300;};const scrollLeft=()=>{scrollElement.current.scrollLeft-=300;};return/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto px-4 my-6 relative font-semibold\",children:data.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-semibold py-4 text-yellow-700\",children:heading}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 md:gap-6 overflow-scroll scrollbar-none transition-all\",ref:scrollElement,children:[/*#__PURE__*/_jsx(\"button\",{className:\"bg-white shadow-md rounded-full p-1 absolute left-0 text-lg hidden md:block z-50\",onClick:scrollLeft,children:/*#__PURE__*/_jsx(FaAngleLeft,{})}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-white shadow-md rounded-full p-1 absolute right-0 text-lg hidden md:block z-50\",onClick:scrollRight,children:/*#__PURE__*/_jsx(FaAngleRight,{})}),loading?loadingList.map((_,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"w-full min-w-[280px] md:min-w-[320px] max-w-[280px] md:max-w-[320px] h-36 bg-white rounded-sm shadow flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-slate-200 h-full p-4 min-w-[120px] md:min-w-[145px] animate-pulse\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 grid w-full gap-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium text-base md:text-lg text-ellipsis line-clamp-1 text-black bg-slate-200 animate-pulse p-1 rounded-full\"}),/*#__PURE__*/_jsx(\"p\",{className:\"capitalize text-slate-500 p-1 bg-slate-200 animate-pulse rounded-full\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 w-full\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600 font-medium p-1 bg-slate-200 w-full animate-pulse rounded-full\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-500 line-through p-1 bg-slate-200 w-full animate-pulse rounded-full\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"text-sm text-white px-3 py-0.5 rounded-full w-full bg-slate-200 animate-pulse\"})]})]},index)):data.map(product=>{const message=\"Salut, puis-je avoir plus d'informations sur le produit \".concat(product===null||product===void 0?void 0:product.productName,\" co\\xFBtant \").concat(displayINRCurrency(product===null||product===void 0?void 0:product.price),\" ?\");return/*#__PURE__*/_jsxs(\"div\",{className:\"w-full min-w-[280px] md:min-w-[320px] max-w-[280px] md:max-w-[320px] h-36 bg-white rounded-sm shadow flex\",children:[/*#__PURE__*/_jsx(Link,{to:'product/'+(product===null||product===void 0?void 0:product._id),className:\"bg-slate-200 h-full p-4 min-w-[120px] md:min-w-[145px]\",onClick:scrollTop,children:/*#__PURE__*/_jsx(\"img\",{src:product.productImage[0],className:\"object-scale-down h-full hover:scale-110 transition-all\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 grid\",children:[/*#__PURE__*/_jsx(Link,{to:'product/'+(product===null||product===void 0?void 0:product._id),onClick:scrollTop,children:/*#__PURE__*/_jsx(\"h2\",{className:\"font-medium text-base md:text-lg text-ellipsis line-clamp-1 text-black\",children:product===null||product===void 0?void 0:product.productName})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600 font-medium text-[10px]\",children:displayINRCurrency(product===null||product===void 0?void 0:product.sellingPrice)}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-500 line-through text-[10px]\",children:displayINRCurrency(product===null||product===void 0?void 0:product.price)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex text-yellow-500\",children:['★'.repeat(product.rating),'☆'.repeat(5-product.rating)]}),/*#__PURE__*/_jsxs(\"a\",{href:\"https://api.whatsapp.com/send?phone=237696926972&text=\".concat(encodeURIComponent(message)),target:\"_blank\",rel:\"noreferrer\",className:\"flex items-center justify-center text-sm bg-gradient-to-r from-green-600 to-green-400 hover:bg-orange-500 text-white px-4 py-2 rounded-full\",children:[/*#__PURE__*/_jsx(FaWhatsapp,{className:\"mr-2\"}),\" Commander\"]})]})]},product===null||product===void 0?void 0:product._id);})]})]})});};export default HorizontalCardProduct;","map":{"version":3,"names":["React","useContext","useEffect","useRef","useState","fetchCategoryWiseProduct","displayINRCurrency","FaAngleLeft","FaAngleRight","Link","addToCart","Context","scrollTop","FaWhatsapp","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","HorizontalCardProduct","_ref","category","heading","data","setData","loading","setLoading","loadingList","Array","fill","scrollElement","fetchUserAddToCart","handleAddToCart","e","id","fetchData","categoryProduct","updatedData","map","product","rating","Math","floor","random","scrollRight","current","scrollLeft","className","children","length","ref","onClick","_","index","message","concat","productName","price","to","_id","src","productImage","sellingPrice","repeat","href","encodeURIComponent","target","rel"],"sources":["C:/Users/Wendy/OneDrive/Desktop/PROJET/MACTOB_STORE/frontend/src/components/HorizontalCardProduct.js"],"sourcesContent":["import React, { useContext, useEffect, useRef, useState } from 'react';\r\nimport fetchCategoryWiseProduct from '../helpers/fetchCategoryWiseProduct';\r\nimport displayINRCurrency from '../helpers/displayCurrency';\r\nimport { FaAngleLeft, FaAngleRight } from 'react-icons/fa6';\r\nimport { Link } from 'react-router-dom';\r\nimport addToCart from '../helpers/addToCart';\r\nimport Context from '../context';\r\nimport scrollTop from '../helpers/scrollTop';\r\nimport { FaWhatsapp } from 'react-icons/fa';\r\n\r\nconst HorizontalCardProduct = ({ category, heading }) => {\r\n    const [data, setData] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const loadingList = new Array(13).fill(null);\r\n\r\n    const scrollElement = useRef();\r\n    const { fetchUserAddToCart } = useContext(Context);\r\n\r\n    const handleAddToCart = async (e, id) => {\r\n        await addToCart(e, id);\r\n        fetchUserAddToCart();\r\n    };\r\n\r\n    const fetchData = async () => {\r\n        setLoading(true);\r\n        const categoryProduct = await fetchCategoryWiseProduct(category);\r\n        setLoading(false);\r\n        if (categoryProduct?.data) {\r\n            const updatedData = categoryProduct.data.map(product => ({\r\n                ...product,\r\n                rating: Math.floor(Math.random() * 5) + 1 // Attribution aléatoire des étoiles (1 à 5)\r\n            }));\r\n            setData(updatedData);\r\n        } else {\r\n            setData([]);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, [category]);\r\n\r\n    const scrollRight = () => {\r\n        scrollElement.current.scrollLeft += 300;\r\n    };\r\n\r\n    const scrollLeft = () => {\r\n        scrollElement.current.scrollLeft -= 300;\r\n    };\r\n\r\n    return (\r\n        <div className='container mx-auto px-4 my-6 relative font-semibold'>\r\n            {data.length > 0 && (\r\n                <>\r\n                    <h3 className='text-2xl font-semibold py-4 text-yellow-700'>{heading}</h3>\r\n                    <div className='flex items-center gap-4 md:gap-6 overflow-scroll scrollbar-none transition-all' ref={scrollElement}>\r\n                        <button className='bg-white shadow-md rounded-full p-1 absolute left-0 text-lg hidden md:block z-50' onClick={scrollLeft}>\r\n                            <FaAngleLeft />\r\n                        </button>\r\n                        <button className='bg-white shadow-md rounded-full p-1 absolute right-0 text-lg hidden md:block z-50' onClick={scrollRight}>\r\n                            <FaAngleRight />\r\n                        </button>\r\n\r\n                        {loading ? (\r\n                            loadingList.map((_, index) => (\r\n                                <div key={index} className='w-full min-w-[280px] md:min-w-[320px] max-w-[280px] md:max-w-[320px] h-36 bg-white rounded-sm shadow flex'>\r\n                                    <div className='bg-slate-200 h-full p-4 min-w-[120px] md:min-w-[145px] animate-pulse'></div>\r\n                                    <div className='p-4 grid w-full gap-2'>\r\n                                        <h3 className='font-medium text-base md:text-lg text-ellipsis line-clamp-1 text-black bg-slate-200 animate-pulse p-1 rounded-full'></h3>\r\n                                        <p className='capitalize text-slate-500 p-1 bg-slate-200 animate-pulse rounded-full'></p>\r\n                                        <div className='flex gap-3 w-full'>\r\n                                            <p className='text-red-600 font-medium p-1 bg-slate-200 w-full animate-pulse rounded-full'></p>\r\n                                            <p className='text-slate-500 line-through p-1 bg-slate-200 w-full animate-pulse rounded-full'></p>\r\n                                        </div>\r\n                                        <button className='text-sm text-white px-3 py-0.5 rounded-full w-full bg-slate-200 animate-pulse'></button>\r\n                                    </div>\r\n                                </div>\r\n                            ))\r\n                        ) : (\r\n                            data.map((product) => {\r\n                                const message = `Salut, puis-je avoir plus d'informations sur le produit ${product?.productName} coûtant ${displayINRCurrency(product?.price)} ?`;\r\n\r\n                                return (\r\n                                    <div key={product?._id} className='w-full min-w-[280px] md:min-w-[320px] max-w-[280px] md:max-w-[320px] h-36 bg-white rounded-sm shadow flex'>\r\n                                        <Link to={'product/' + product?._id} className='bg-slate-200 h-full p-4 min-w-[120px] md:min-w-[145px]' onClick={scrollTop}>\r\n                                            <img src={product.productImage[0]} className='object-scale-down h-full hover:scale-110 transition-all' />\r\n                                        </Link>\r\n\r\n                                        <div className='p-4 grid'>\r\n                                            <Link to={'product/' + product?._id} onClick={scrollTop}>\r\n                                                <h2 className='font-medium text-base md:text-lg text-ellipsis line-clamp-1 text-black'>{product?.productName}</h2>\r\n                                            </Link>\r\n                                            <div className='flex gap-3'>\r\n                                                <p className='text-red-600 font-medium text-[10px]'>{displayINRCurrency(product?.sellingPrice)}</p>\r\n                                                <p className='text-slate-500 line-through text-[10px]'>{displayINRCurrency(product?.price)}</p>\r\n                                            </div>\r\n                                            <div className='flex text-yellow-500'>\r\n                                                {'★'.repeat(product.rating)}{'☆'.repeat(5 - product.rating)}\r\n                                            </div>\r\n                                            <a \r\n                                                href={`https://api.whatsapp.com/send?phone=237696926972&text=${encodeURIComponent(message)}`}\r\n                                                target='_blank'\r\n                                                rel='noreferrer'\r\n                                                className='flex items-center justify-center text-sm bg-gradient-to-r from-green-600 to-green-400 hover:bg-orange-500 text-white px-4 py-2 rounded-full'>\r\n                                                <FaWhatsapp className='mr-2' /> Commander\r\n                                            </a>\r\n                                        </div>\r\n                                    </div>\r\n                                );\r\n                            })\r\n                        )}\r\n                    </div>\r\n                </>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default HorizontalCardProduct;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}