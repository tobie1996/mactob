{"ast":null,"code":"import React,{useEffect,useState}from'react';import SummaryApi from'../common';import{toast}from'react-toastify';import moment from'moment';import{MdModeEdit}from\"react-icons/md\";import ChangeUserRole from'../components/ChangeUserRole';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AllUsers=()=>{const[allUser,setAllUsers]=useState([]);const[openUpdateRole,setOpenUpdateRole]=useState(false);const[updateUserDetails,setUpdateUserDetails]=useState({email:\"\",name:\"\",role:\"\",_id:\"\"});const fetchAllUsers=async()=>{const token=localStorage.getItem(\"token\");const fetchData=await fetch(SummaryApi.allUser.url,{method:SummaryApi.allUser.method,credentials:'include',headers:{\"Content-Type\":'application/json',Authorization:\"Bearer \".concat(token)}});const dataResponse=await fetchData.json();if(dataResponse.success){setAllUsers(dataResponse.data);}if(dataResponse.error){toast.error(dataResponse.message);}};useEffect(()=>{fetchAllUsers();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white pb-4\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"w-full userTable\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-green-950 text-white\",children:[/*#__PURE__*/_jsx(\"th\",{children:\"Sr.\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"\",children:allUser.map((el,index)=>{return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:el===null||el===void 0?void 0:el.name}),/*#__PURE__*/_jsx(\"td\",{children:el===null||el===void 0?void 0:el.email}),/*#__PURE__*/_jsx(\"td\",{children:el===null||el===void 0?void 0:el.role}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"bg-green-100 p-2 rounded-full cursor-pointer hover:bg-green-500 hover:text-white\",onClick:()=>{setUpdateUserDetails(el);setOpenUpdateRole(true);},children:/*#__PURE__*/_jsx(MdModeEdit,{})})})]});})})]}),openUpdateRole&&/*#__PURE__*/_jsx(ChangeUserRole,{onClose:()=>setOpenUpdateRole(false),name:updateUserDetails.name,email:updateUserDetails.email,role:updateUserDetails.role,userId:updateUserDetails._id,callFunc:fetchAllUsers})]});};export default AllUsers;","map":{"version":3,"names":["React","useEffect","useState","SummaryApi","toast","moment","MdModeEdit","ChangeUserRole","jsx","_jsx","jsxs","_jsxs","AllUsers","allUser","setAllUsers","openUpdateRole","setOpenUpdateRole","updateUserDetails","setUpdateUserDetails","email","name","role","_id","fetchAllUsers","token","localStorage","getItem","fetchData","fetch","url","method","credentials","headers","Authorization","concat","dataResponse","json","success","data","error","message","className","children","map","el","index","onClick","onClose","userId","callFunc"],"sources":["C:/Users/Wendy/OneDrive/Desktop/PROJET/MACTOB_STORE/frontend/src/pages/AllUsers.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport SummaryApi from '../common'\r\nimport { toast } from 'react-toastify'\r\nimport moment from 'moment'\r\nimport { MdModeEdit } from \"react-icons/md\";\r\nimport ChangeUserRole from '../components/ChangeUserRole';\r\n\r\nconst AllUsers = () => {\r\n    const [allUser, setAllUsers] = useState([])\r\n    const [openUpdateRole, setOpenUpdateRole] = useState(false)\r\n    const [updateUserDetails, setUpdateUserDetails] = useState({\r\n        email: \"\",\r\n        name: \"\",\r\n        role: \"\",\r\n        _id: \"\"\r\n    })\r\n\r\n    const fetchAllUsers = async () => {\r\n\r\n        const token = localStorage.getItem(\"token\");\r\n        const fetchData = await fetch(SummaryApi.allUser.url, {\r\n            method: SummaryApi.allUser.method,\r\n            credentials: 'include',\r\n            headers: {\r\n                \"Content-Type\": 'application/json',\r\n                Authorization: `Bearer ${token}`\r\n            },\r\n        })\r\n\r\n        const dataResponse = await fetchData.json()\r\n\r\n        if (dataResponse.success) {\r\n            setAllUsers(dataResponse.data)\r\n        }\r\n\r\n        if (dataResponse.error) {\r\n            toast.error(dataResponse.message)\r\n        }\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n        fetchAllUsers()\r\n    }, [])\r\n\r\n    return (\r\n        <div className='bg-white pb-4'>\r\n            <table className='w-full userTable'>\r\n                <thead>\r\n                    <tr className='bg-green-950 text-white'>\r\n                        <th>Sr.</th>\r\n                        <th>Name</th>\r\n                        <th>Email</th>\r\n                        <th>Role</th>\r\n                        <th>Action</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody className=''>\r\n                    {\r\n                        allUser.map((el, index) => {\r\n                            return (\r\n                                <tr>\r\n                                    <td>{index + 1}</td>\r\n                                    <td>{el?.name}</td>\r\n                                    <td>{el?.email}</td>\r\n                                    <td>{el?.role}</td>\r\n                                    <td>\r\n                                        <button className='bg-green-100 p-2 rounded-full cursor-pointer hover:bg-green-500 hover:text-white'\r\n                                            onClick={() => {\r\n                                                setUpdateUserDetails(el)\r\n                                                setOpenUpdateRole(true)\r\n\r\n                                            }}\r\n                                        >\r\n                                            <MdModeEdit />\r\n                                        </button>\r\n                                    </td>\r\n                                </tr>\r\n                            )\r\n                        })\r\n                    }\r\n                </tbody>\r\n            </table>\r\n\r\n            {\r\n                openUpdateRole && (\r\n                    <ChangeUserRole\r\n                        onClose={() => setOpenUpdateRole(false)}\r\n                        name={updateUserDetails.name}\r\n                        email={updateUserDetails.email}\r\n                        role={updateUserDetails.role}\r\n                        userId={updateUserDetails._id}\r\n                        callFunc={fetchAllUsers}\r\n                    />\r\n                )\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AllUsers"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}